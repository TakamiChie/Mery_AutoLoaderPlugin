# Mery_AutoLoaderPlugin
ファイルを保存する時に、自動的に任意のプログラムを実行し、結果を表示するMeryプラグイン

## なにをするもの？

ファイルを保存する時に、先頭行のコマンドを読み取り、実行・Meryのアウトプットウィンドウやファイルに結果を出力するプラグインです。たとえばless(css)ファイルを保存すると自動的にlesscコマンドを使ってcssファイルに変換するなどといったことが出来ます(事前にlesscコマンドがインストールし、パスを通しておく必要があります)。

### 実行例

たとえばlesscssの場合、lessファイルの先頭に以下のような文を記載します。

```
// ** run:lessc
// ** args:"$1"
// ** out:file
// ** outfile:$dn1\$fnwe1.css

/* 以下コード */
```

このような記載があった場合、ファイルを保存すると自動的にlesscコマンドでコンパイルし、結果を同名のCSSファイルに保存します。

## プラグインがサポートしているコマンド
行中に「**」と書かれている行をコマンド行とみなします。

 * run:実行コマンドを指定します。必ず指定する必要があります。
 * args:実行コマンドの引数を指定します。以下の展開変数が利用可能です。
 * out:実行結果の出力先を指定します。consoleまたはfileのみが利用可能です。
 * outfile:outコマンドがfileのときに出力されるファイル名を指定します。展開変数が利用可能です。
 * console:コンソールに文を出力します。展開変数が利用可能です。
 * dialog:ダイアログに文を表示します。展開変数が利用可能です。

### 展開変数

args, outfile, console, dialogコマンドでは以下の展開変数が利用可能です。

 * $1:現在開いているファイルのパス
 * $dn1:現在開いているファイルのディレクトリパス
 * $fn1:現在開いているファイルのファイル名および拡張子
 * $ex1:現在開いているファイルの拡張子
 * $fnwe1:現在開いているファイルのファイル名(拡張子無し)

なお、outfile等のコマンドに指定した値が実際に期待した値になっているかどうかを確認する方法は用意していません。
変数が展開されているかどうかを確認したい場合は、console:コマンドなどを利用してください。

## その他制限など
プラグインからアウトプットウィンドウを表示すると、フォーカスがアウトプットウィンドウに移動してしまうため、アウトプットウィンドウに文を出力した場合であってもアウトプットウィンドウは **表示されません**。必要な場合は自分で表示させてください。